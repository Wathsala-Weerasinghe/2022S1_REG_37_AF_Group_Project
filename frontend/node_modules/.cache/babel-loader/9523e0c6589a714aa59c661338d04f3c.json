{"ast":null,"code":"var _jsxFileName = \"/Users/kethmi/Desktop/assignment/2022S1_REG_37_AF_Group_Project/frontend/src/pages/ticket/ViewTicket.js\";\nimport React from \"react\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ViewTicket extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      tableData: [],\n      theaterData: [],\n      movieData: []\n    };\n  }\n\n  componentDidMount() {\n    if (this.first) return;\n    this.first = true;\n    var token = sessionStorage.getItem('token');\n    axios.get(`http://localhost:3021/ticket-bundles`, {\n      headers: {\n        'Authorization': token\n      }\n    }).then(response => {\n      this.setState(prevState => {\n        let tableData = { ...prevState.tableData\n        };\n        tableData = response.data;\n        return {\n          tableData\n        };\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    axios.get(`http://localhost:3021/theaters`, {\n      headers: {\n        'Authorization': token\n      }\n    }).then(response => {\n      this.setState(prevState => {\n        let theaterData = { ...prevState.theaterData\n        };\n        theaterData = response.data;\n        return {\n          theaterData\n        };\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    axios.get(`http://localhost:3021/movies`, {\n      headers: {\n        'Authorization': token\n      }\n    }).then(response => {\n      this.setState(prevState => {\n        let movieData = { ...prevState.movieData\n        };\n        movieData = response.data;\n        return {\n          movieData\n        };\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  getTheaterName(id) {\n    var theater = this.state.theaterData.filter(val => val._id === id);\n\n    if (theater.length === 1) {\n      return theater[0].name;\n    }\n\n    return 'N/A';\n  }\n\n  getMovieName(id) {\n    var movie = this.state.movieData.filter(val => val._id === id);\n\n    if (movie.length === 1) {\n      return movie[0].name;\n    }\n\n    return 'N/A';\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Ticket Bundles\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"btn btn-success\",\n          href: \"/manage-tickets\",\n          children: \"Manage\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-striped\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"thead-dark\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Theater\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Movie\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Ticket Count\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Book Count\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Available Count\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.state.tableData.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: this.getTheaterName(item.theaterid)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: this.getMovieName(item.movieid)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.ticketcount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.bookedticketcount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.availableticketcount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 29\n              }, this)]\n            }, item._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 25\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this);\n  }\n\n}\n\nexport default ViewTicket;","map":{"version":3,"names":["React","axios","ViewTicket","Component","constructor","state","tableData","theaterData","movieData","componentDidMount","first","token","sessionStorage","getItem","get","headers","then","response","setState","prevState","data","catch","error","console","log","getTheaterName","id","theater","filter","val","_id","length","name","getMovieName","movie","render","map","item","theaterid","movieid","ticketcount","bookedticketcount","availableticketcount","price"],"sources":["/Users/kethmi/Desktop/assignment/2022S1_REG_37_AF_Group_Project/frontend/src/pages/ticket/ViewTicket.js"],"sourcesContent":["import React from \"react\";\r\nimport axios from 'axios';\r\n\r\nclass ViewTicket extends React.Component\r\n{\r\n    constructor () {\r\n        super();\r\n\r\n        this.state = {\r\n            tableData: [],\r\n            theaterData: [],\r\n            movieData: []\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.first) return; this.first = true;\r\n\r\n        var token = sessionStorage.getItem('token');\r\n        axios.get(`http://localhost:3021/ticket-bundles`, {\r\n            headers: {\r\n            'Authorization' : token\r\n            }\r\n        })\r\n        .then(response => {\r\n            this.setState(prevState => {\r\n                let tableData = { ...prevState.tableData };\r\n                tableData = response.data;                 \r\n                return { tableData }; \r\n              });\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n        });\r\n\r\n        axios.get(`http://localhost:3021/theaters`, {\r\n            headers: {\r\n            'Authorization' : token\r\n            }\r\n        })\r\n        .then(response => {\r\n            this.setState(prevState => {\r\n                let theaterData = { ...prevState.theaterData };\r\n                theaterData = response.data;                 \r\n                return { theaterData }; \r\n              });\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n        });\r\n\r\n        axios.get(`http://localhost:3021/movies`, {\r\n            headers: {\r\n            'Authorization' : token\r\n            }\r\n        })\r\n        .then(response => {\r\n            this.setState(prevState => {\r\n                let movieData = { ...prevState.movieData };\r\n                movieData = response.data;                 \r\n                return { movieData }; \r\n              });\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    getTheaterName(id){\r\n        var theater = this.state.theaterData.filter(val => val._id === id);\r\n\r\n        if (theater.length === 1){\r\n            return theater[0].name;\r\n        }\r\n\r\n        return 'N/A';\r\n    }\r\n\r\n    getMovieName(id){\r\n        var movie = this.state.movieData.filter(val => val._id === id);\r\n\r\n        if (movie.length === 1){\r\n            return movie[0].name;\r\n        }\r\n\r\n        return 'N/A';\r\n    }\r\n\r\n    render() {\r\n        return (<div>\r\n            <h4>Ticket Bundles</h4>\r\n            <hr />\r\n            <div>\r\n                <a className=\"btn btn-success\" href=\"/manage-tickets\">Manage</a>\r\n                <br /><br />\r\n                <table className=\"table table-striped\">\r\n                    <thead className=\"thead-dark\">\r\n                        <tr>\r\n                            <th>Theater</th>\r\n                            <th>Movie</th>\r\n                            <th>Ticket Count</th>\r\n                            <th>Book Count</th>\r\n                            <th>Available Count</th>\r\n                            <th>Price</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {this.state.tableData.map(item => \r\n                        <tr key={item._id}>\r\n                            <td>{this.getTheaterName(item.theaterid)}</td>\r\n                            <td>{this.getMovieName(item.movieid)}</td>\r\n                            <td>{item.ticketcount}</td>\r\n                            <td>{item.bookedticketcount}</td>\r\n                            <td>{item.availableticketcount}</td>\r\n                            <td>{item.price}</td>\r\n                        </tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>);\r\n    }\r\n}\r\n\r\nexport default ViewTicket;"],"mappings":"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"},"metadata":{},"sourceType":"module"}